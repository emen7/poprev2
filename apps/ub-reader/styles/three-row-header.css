/**
 * Three-Row Header Global Styles
 *
 * This file contains global styles for the 3-row header layout
 * used in the UB Reader. It includes necessary CSS variables and
 * utility classes.
 */

:root {
  /* Row heights for 3-row header */
  --row1-height: 3rem; /* Title Row */
  --row2-height: 2.5rem; /* Paper Row */
  --row3-height: 2rem; /* Section Row */
  --header-total-height: calc(var(--row1-height) + var(--row2-height) + var(--row3-height));

  /* Z-index layers */
  --z-index-base: 1;
  --z-index-overlay: 50;
  --z-index-header: 100;
  --z-index-dropdown: 200;

  /* Monochromatic colors for titles */
  --title-color: rgba(0, 0, 0, 0.95); /* Default - will be overridden by theme */
  --title-color-darker: rgba(0, 0, 0, 0.7); /* For elements that need to be slightly darker */

  /* Base colors that work well with both themes */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f5f5f5;
  --color-bg-tertiary: #e9e9e9;
  --color-border-primary: rgba(0, 0, 0, 0.1);
}

/* Apply theme-specific title colors */
.light-theme-container {
  --title-color: #2c5282;
  --title-color-darker: #1e3a5f;
}

.dark-theme-container {
  --title-color: rgba(255, 255, 255, 0.95);
  --title-color-darker: rgba(255, 255, 255, 0.7);
  --color-bg-primary: #1a1a1a;
  --color-bg-secondary: #222222;
  --color-bg-tertiary: #2a2a2a;
  --color-border-primary: rgba(255, 255, 255, 0.1);
}

/* Global styles for section titles to ensure detection works properly */
h3.section-title,
h3.section-heading {
  position: relative;
  scroll-margin-top: var(--header-total-height);
  color: var(--title-color);
  font-size: 1.2rem;
  margin: 1.5rem 0 1rem 0;
  padding-top: 0.5rem;
}

/* Padding already applied to reader-container in TraditionalReader.css */
.reading-area {
  padding-top: 1rem;
}

/* Only apply margin when not inside reader-container */
body > .ub-reading-content:not(.reader-container .ub-reading-content) {
  margin-top: var(--header-total-height);
}

/* Base styles for the three-row-header */
.three-row-header {
  position: fixed !important;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: var(--z-index-header);
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 800px; /* Match reading area max-width */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* When inside the content div, ensure proper width */
.content .three-row-header {
  width: 100%;
  max-width: 100%;
}

/* Make sure each row spans the full width for proper centering */
.three-row-header .title-row,
.three-row-header .paper-row,
.three-row-header .section-row {
  display: flex;
  justify-content: center;
  width: 100%;
  padding: 0 1rem;
  box-sizing: border-box;
}

/* Ensure text elements are centered within their containers */
.title-row .book-title,
.paper-row .paper-title,
.section-row .section-title,
.section-row .faded-intro {
  text-align: center;
  width: 100%;
}

/* Center the header content on desktop within our fixed-width container */
@media (min-width: 1024px) {
  .three-row-header {
    width: 800px;
    max-width: 100%;
  }
}

/* Add padding to content to account for fixed header */
.content {
  padding-top: calc(var(--header-total-height) + 1rem) !important;
}

/* Debug helper classes */
.debug-outline {
  outline: 1px solid red !important;
}

.debug-section {
  background-color: rgba(255, 0, 0, 0.05) !important;
}
